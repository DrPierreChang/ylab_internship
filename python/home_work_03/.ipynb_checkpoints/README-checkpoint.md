# Геометрический калькулятор
    
Калькулятор спроектирован и реализован при помощь ООП для вычисления площади и объема геометрических фигур.

Плоские фигуры: круг, квадрат, прямоугольник, треугольник, трапеция, ромб.

Объемные фигуры: сфера, куб, параллелепипед, пирамида, цилиндр, конус.

Калькулятор запускается из файла

```shell
calculator.py
```

Классы содержащие методы для расчета площади и объема вынесены в файл area_volume.py

Тесты программы находятся в файле test.py

В работе использовался python3.9 и библиотеки:

- kivy
- math
- numpy
- matplotlib
- unittest

Программа имеет графический интерфейс. Визуализация фигур пока доступна только для квадрата и круга.

<p align="center">
<img src="images/1.png" alt="example">
</p>

## Как работает калькулятор на примере вычисления площади пирамиды

Калькулятор считает площадь полной поверхности правильной пирамиды через высоту

<p>
<img src="images/3.png" alt="example" style="float: left;">
<img src="images/2.png" alt="example" style="float: center;">
</p>

При запуске калькулятора пользователя просят выбрать фигуру. А на экране появляется инструкция.

<img src="images/4.png" alt="example" style="float: right;" width=650>

Интерефейс реализован с помощью фреймворка kivy

Основные части приложения kivy:
- BoxLayout - окно включающее в себя все остальные элементы
~~~~python
# создание главного окна
    root = BoxLayout(orientation="vertical", padding=5)
~~~~~


- Image - показывает изображения

~~~python

# создание окна для показа изображения
self.image = Image(source="instruction.png")
~~~

- TextInput - поле ввода и отображения текста

~~~~python 
# цвет фона указывается в rgba
        self.box1 = TextInput(
                text="", readonly=True, font_size=25,
                size_hint=[1, .20], background_color=[1, 1, 1, .8])
~~~~

- GridLayout - включает в себя все кнопки


~~~python
figure_buttons = GridLayout(cols=2)

# в цикле добавляем в приложение все кнопки фигур
figures_ls = [
            "Круг", "Сфера", "Треугольник", "Пирамида", "Квадрат",
            "Куб", "Прямоугольник", "Параллелепипед", "Трапеция",
            "Цилиндр", "Ромб", "Конус"]

for i in figures_ls:
    figure_buttons.add_widget(
        Button(text=f"{i}", on_press=self.calculate))
~~~

<img src="images/5.png" alt="example" style="float: right;" width=650>

Пользователь выбирает пирамиду и ему предлагается ввести данные в нжиний текстбокс

Для расчета площади необходимо ввести с клавиатуры:

- a - длину стороны основания
- n - количество сторон основания
- h - высота пирамиды

Пользователь вводит данные и нажимает на кнопку площадь

Для взаимодействия с пользователем служит метод calculate, который обрабатывает всю информацию от пользователя:
- нажатия кнопок
- данные, введенные в текстовое поле

~~~python
# метод, взаимодействеющий с пользователем
def calculate(self, button) -> None:
    """
    :param button: нажатая кнопка
    """
~~~

При обращении к этому методу создается объект класса геометрические фигуры

~~~python
figure = GeometricFigures()
~~~

Далее создается глобальная переменная name, которая будет хранить имя выбранной фигуры до следующего выбора фигуры

~~~ python
global name
# при выборе фигуры выводится предложение ввести необходимые данные
if button.text in welcome_message:
    # сохраняется имя выбранной фигуры
    name = button.text
    self.box1.text = welcome_message[name]
    # нижний текстбокс освобождается, чтобы пользователь ввел данные
    self.box2.text = ""
~~~

Перед нажатием кнопки "Площадь" пользователь ввел данные для пирамиды
Эти данные обрабатываются методом area класса GeometricFigures

Также этот метод прнимает название выбранной фигуры, чтобы именно для нее посчитать и вернуть площадь 
~~~python
self.box2.text = str(
figure.area(data, figure_name=f"{name}"))
# изображение, которое показывается после подсчета
self.image.source = 'instruction.png'
# сообщение будет показано вместе с результатом
self.box1.text = "Площадь фигуры равна:"
~~~

~~~python
class GeometricFigures:
    figure_area = 0

    def area(self, data: str, figure_name="") -> float:
        """
        :param data: аргументы для вычисления площади определенной фигуры
        :param figure_name: имя фигуры для которой нужно посчитать площадь
        :return: возвращается посчитанная площадь
        """
~~~

По названию фигуры, которое хранится в глобальной переменной name в методе подбирется необходимая формула.

В нашем случае это пирамида
~~~python
elif figure_name == "Пирамида":
    # a - длина стороны n - количество сторон  h - высота пирамиды
    anh = data.split()
    # данные от пользователя приходят строкой,
    # поэтому они преобразуются для дальнейших вычислений
    a, n, h = float(anh[0]), float(anh[1]), float(anh[2])
    # считается площадь
    s = ((n * a)/2) * ((a/(2*tan(radians(180)/n))) +
                       (h**2 + (a/(2*tan(radians(180)/n)))**2)**0.5)
    self.figure_area += s
~~~

Результат возвращется пользователю

<p align="center">
 <img src="images/6.png" alt="example" width=650>
</p>

## Источники информации

Другие:

- [Площадь пирамиды](https://allcalc.ru/node/205)

